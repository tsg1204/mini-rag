<!DOCTYPE html><html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>Refactoring Javascript Logic to Use a Functional Approach</title><style>
      * {
        font-family: Georgia, Cambria, "Times New Roman", Times, serif;
      }
      html, body {
        margin: 0;
        padding: 0;
      }
      h1 {
        font-size: 50px;
        margin-bottom: 17px;
        color: #333;
      }
      h2 {
        font-size: 24px;
        line-height: 1.6;
        margin: 30px 0 0 0;
        margin-bottom: 18px;
        margin-top: 33px;
        color: #333;
      }
      h3 {
        font-size: 30px;
        margin: 10px 0 20px 0;
        color: #333;
      }
      header {
        width: 640px;
        margin: auto;
      }
      section {
        width: 640px;
        margin: auto;
      }
      section p {
        margin-bottom: 27px;
        font-size: 20px;
        line-height: 1.6;
        color: #333;
      }
      section img {
        max-width: 640px;
      }
      footer {
        padding: 0 20px;
        margin: 50px 0;
        text-align: center;
        font-size: 12px;
      }
      .aspectRatioPlaceholder {
        max-width: auto !important;
        max-height: auto !important;
      }
      .aspectRatioPlaceholder-fill {
        padding-bottom: 0 !important;
      }
      header,
      section[data-field=subtitle],
      section[data-field=description] {
        display: none;
      }
      </style></head><body><article class="h-entry">
<header>
<h1 class="p-name">Refactoring Javascript Logic to Use a Functional Approach</h1>
</header>
<section data-field="subtitle" class="p-summary">
or Functional-Light Javascript
</section>
<section data-field="body" class="e-content">
<section name="bbd1" class="section section--body section--first section--last"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h3 name="a6ed" id="a6ed" class="graf graf--h3 graf--leading graf--title">Refactoring JavaScript Logic to Use a Functional Approach</h3><h4 name="f607" id="f607" class="graf graf--h4 graf-after--h3 graf--subtitle">or Functional-Light JavaScript</h4><figure name="bab2" id="bab2" class="graf graf--figure graf-after--h4"><img class="graf-image" data-image-id="1*_pllS9yc95DyCYM66Vmjhg.jpeg" data-width="390" data-height="285" data-is-featured="true" src="https://cdn-images-1.medium.com/max/800/1*_pllS9yc95DyCYM66Vmjhg.jpeg"><figcaption class="imageCaption">See, it’s pretty simple…</figcaption></figure><p name="6be3" id="6be3" class="graf graf--p graf-after--figure">Years ago, a very sharp mathematician turned software developer asked me if I knew anything about functional programming. ‘No’ I replied. I saw the gleam in his eye as he rose from his seat to walk over to the whiteboard where an hour-long impromptu lecture would begin.</p><p name="0d7d" id="0d7d" class="graf graf--p graf-after--p">He furiously drew a spattering of math on the board. There were pointy hats over numbers, I think an infinity symbol entered the picture. There were many functions… so many functions. They all kinda looked like this <code class="markup--code markup--p-code">f(g(x))</code></p><p name="0fb0" id="0fb0" class="graf graf--p graf-after--p">It was amazing! At the end of that hour, I knew just as much about functional programming as when I started, but now I was damn sure not going to try and use it in real life. It seemed you needed a four year degree in a math related field to understand what the hell was going on here.</p><p name="5740" id="5740" class="graf graf--p graf-after--p">Thanks, I replied. Perhaps my dutiful nodding throughout the lecture had duped him into thinking I had gleaned something from it. This was absolutely not the case.</p><p name="de69" id="de69" class="graf graf--p graf-after--p">Over the years, I would continue to hear about functional programming and its benefits. I figured there had to be a lot of mathematicians out there writing all this code. Finally, it began to click and I’m here to tell you that you don’t need to be a functional programming purist to get a lot of its benefits when writing JavaScript.</p><p name="997e" id="997e" class="graf graf--p graf-after--p">While monads, unary functions and referential transparency are terms you might hear tossed around when people speak or write about functional programming, there are a few major concepts that can help you approach a more functional style when writing code that are fairly simple to understand and apply.</p><p name="db2c" id="db2c" class="graf graf--p graf-after--p">The goal/benefit of writing JavaScript in a functional style is that your code becomes more easily testable, easier to understand, has less density for bugs to hide in, is more flexible and thus easier to refactor and more reliable.</p><p name="f4ee" id="f4ee" class="graf graf--p graf-after--p">Great, you say. Where do I start?</p><h4 name="f3ab" id="f3ab" class="graf graf--h4 graf-after--p">If you’ve used Redux then you’ve already been introduced to one of the major concepts behind functional programming: do NOT mutate data!</h4><p name="0f04" id="0f04" class="graf graf--p graf-after--h4">If you are unfamiliar with Redux, it is a state management tool that is often used alongside React. A typical Redux use case is sharing data between two components like a logged in user’s information that may be needed across an app to display different user-specific data.</p><p name="8845" id="8845" class="graf graf--p graf-after--p">A Redux action will trigger a reducer to update an object, but importantly, it will not mutate the object but instead return a new object with the updated values.</p><pre name="1e9b" id="1e9b" class="graf graf--pre graf-after--p">case &#39;UPDATE_USER&#39;:<br>const { updatedVals = {} } = action;<br>  return {<br>    ...state,<br>    ...updatedVals,<br>  };</pre><p name="b3fa" id="b3fa" class="graf graf--p graf-after--pre">The problem with mutating data is that there may be other logic that depends on the data maintaining its original shape. Perhaps you are ingesting some realtime data and certain widgets need this information to be transformed into a certain shape… well, once that mutated data is ingested by other widgets, it may no longer work in the way they expect. This is bad.</p><p name="e6ce" id="e6ce" class="graf graf--p graf-after--p">Using the spread operator or <code class="markup--code markup--p-code">Object.assign</code> can help you achieve the goal of returning a new copy of an object or array with different values and properties. Similarly, <code class="markup--code markup--p-code">map, reduce and filter</code> are good ways to return a new array with updated values while <code class="markup--code markup--p-code">forEach</code> is typically used to update the actual values in an array.</p><p name="f180" id="f180" class="graf graf--p graf-after--p">Now that you have eschewed mutating data, you need to have reliable functions you can depend on to manage your pristine data. These functions should strive towards purity.</p><h4 name="5a00" id="5a00" class="graf graf--h4 graf-after--p">Pure functions are methods that will produce the same output given the same input.</h4><p name="a9e7" id="a9e7" class="graf graf--p graf-after--h4">Simple right? It might surprise how easy it is to NOT follow this rule and you may be guilty of it. Let me show you the err of your ways.</p><pre name="81c7" id="81c7" class="graf graf--pre graf-after--p">let shouldDisplayWelcomeMessage = false;</pre><pre name="2938" id="2938" class="graf graf--pre graf-after--pre">const displayFooterElem = () =&gt; {<br>  return shouldDisplayWelcomMessage ? renderFooterWithMessge() : renderFooter();<br>}</pre><p name="ca49" id="ca49" class="graf graf--p graf-after--pre">Our function <code class="markup--code markup--p-code">displayFooterElem</code> is not pure as it relies on a global, re-assignable variable <code class="markup--code markup--p-code">shouldDisplayWelcomeMessage</code> to determine its output. The most simple way to fix this potentially clunky function is to define <code class="markup--code markup--p-code">shouldDisplayWelcomeMessage</code> as a constant. In fact, most functional JavaScript will ONLY use constants,<code class="markup--code markup--p-code">Object.freeze</code> or <code class="markup--code markup--p-code">Object.seal</code> to ensure that variables, objects and arrays are non-mutable.</p><p name="433b" id="433b" class="graf graf--p graf-after--p">Maintaining function purity, which also includes NOT creating side effects like logging to the console or mutating data can be more difficult than it appears. As a rule of thumb, keep your functions small and responsible for a single purpose. If you have a function that does not have a return value then that may be a clue that it is impure as it’s only creating side effects or mutating data.</p><h4 name="599f" id="599f" class="graf graf--h4 graf-after--p">With your small, single purpose methods you are finally ready to compose functions and reach functional programming mastery!</h4><p name="6067" id="6067" class="graf graf--p graf-after--h4">You may have used function composition without even knowing it. JavaScript treats functions as first class members, meaning they can be passed as arguments to other functions. Higher Order Components in React leverage this ability to create flexible components, composed of potentially many smaller components. Similarly, if you’ve used a callback function with some async logic, then you’ve dabbled in function composition as well.</p><p name="6b85" id="6b85" class="graf graf--p graf-after--p">Function composition is basically passing functions as arguments to achieve some logic — my mathematical friend was trying to show me this when he scribbled <code class="markup--code markup--p-code">f(g(x))</code> on that board.</p><p name="69a2" id="69a2" class="graf graf--p graf-after--p">Let’s refactor some code that inspects the items in a <code class="markup--code markup--p-code">cart</code> object and returns a warning if the item is not available for discount to make it more functional and take advantage of function composition:</p><pre name="356c" id="356c" class="graf graf--pre graf-after--p">// procedural approach</pre><pre name="56ed" id="56ed" class="graf graf--pre graf-after--pre">let nonDiscountableItems = [];</pre><pre name="07f2" id="07f2" class="graf graf--pre graf-after--pre">let discountableMsgs = [];</pre><pre name="0e9d" id="0e9d" class="graf graf--pre graf-after--pre">const cart = {<br>  items: [<br>    {<br>      discountable: false,<br>      name: &#39;Item 2&#39;<br>    },<br>    {<br>      discountable: false,<br>      name: &#39;Item 1&#39;<br>    },<br>    {<br>      discountable: false,<br>      name: &#39;Item 3&#39;<br>    }<br>  ]<br>}</pre><pre name="fcb4" id="fcb4" class="graf graf--pre graf-after--pre">cart.items.forEach(item =&gt; {<br>  if (item.discountable == false) {<br>    nonDiscountableItems.push(item);<br>  }<br>});</pre><pre name="8639" id="8639" class="graf graf--pre graf-after--pre">// create a list of messages for the items that are NOT discountable</pre><pre name="22f6" id="22f6" class="graf graf--pre graf-after--pre">if (nonDiscountableItems) {<br>  nonDiscountableItems.map(item =&gt; {<br>    discountableMsgs.push(`${item.name} is not available for discount.`);<br>  });<br>}</pre><pre name="1420" id="1420" class="graf graf--pre graf-after--pre">********************************************************************</pre><pre name="597a" id="597a" class="graf graf--pre graf-after--pre">// more functional refactor</pre><pre name="b34f" id="b34f" class="graf graf--pre graf-after--pre">const isNotDiscountable = (item) =&gt; {<br>  return !item.discountable<br>}</pre><pre name="044d" id="044d" class="graf graf--pre graf-after--pre">const nonDiscountMessage = (item) =&gt; {<br>  return `${item.name} is not available for discount.`<br>}</pre><pre name="4649" id="4649" class="graf graf--pre graf-after--pre">const discountableMsgs = cart.items<br>  .filter(isNotDiscountable)<br>  .map(nonDiscountMessage);</pre><p name="baa2" id="baa2" class="graf graf--p graf-after--pre">Our refactored code is more succinct and takes advantage of small functions that can be composed to create an array of warnings for items in our cart that are not discountable. We’ve reduced the surface area for bugs to hide in and made code that is more adaptable to change.</p><p name="bf88" id="bf88" class="graf graf--p graf-after--p">Eventually, when our project manager asks for warning messages based on some other attribute of an cart item we can simply write another small function that can be swapped with <code class="markup--code markup--p-code">isNotDiscountable.</code></p><p name="928e" id="928e" class="graf graf--p graf-after--p">You may notice that the functions written in the code above have a single argument in their signature. <code class="markup--code markup--p-code">Unary</code> functions are functions that have a single argument, are common in functional programming. Often, writing a function with this constraint can be, well… constraining.</p><p name="3dbf" id="3dbf" class="graf graf--p graf-after--p">Curried functions can be used to write a series of unary functions, like so:</p><pre name="b48b" id="b48b" class="graf graf--pre graf-after--p">// non-curried function with multiple arguments</pre><pre name="1c1a" id="1c1a" class="graf graf--pre graf-after--pre">const multiply = (num1, num2, num3) =&gt; {<br>  return num1 * num2 * num3<br>}</pre><pre name="a6a6" id="a6a6" class="graf graf--pre graf-after--pre">********************************************************************</pre><pre name="e5db" id="e5db" class="graf graf--pre graf-after--pre">// deliciously curried function</pre><pre name="2749" id="2749" class="graf graf--pre graf-after--pre">const curriedMultiply = (num1) =&gt; {<br>  return (num2) =&gt; {<br>    return (num3) =&gt; {<br>      return num1 * num2 * num3;<br>    }<br>  }<br>}</pre><pre name="782d" id="782d" class="graf graf--pre graf-after--pre">curriedMultiply(1)(2)(3);<br>//6</pre><p name="1f11" id="1f11" class="graf graf--p graf-after--pre">Ahh, satisfying.</p><h4 name="94a7" id="94a7" class="graf graf--h4 graf-after--p">You don’t need to be a functional programming purist to enjoy the benefits it can offer in your code base.</h4><p name="3c09" id="3c09" class="graf graf--p graf-after--h4 graf--trailing">Instead of getting caught up in the dogma of functional approaches, use common sense techniques like function composition, immutability and function purity to write the kind of code that will make your application easier to read, test and less buggy!</p></div></div></section>
</section>
<footer><p>By <a href="https://medium.com/@brianjenney" class="p-author h-card">Brian Jenney</a> on <a href="https://medium.com/p/fca3ae5e406"><time class="dt-published" datetime="2020-12-27T14:55:30.944Z">December 27, 2020</time></a>.</p><p><a href="https://medium.com/@brianjenney/refactoring-javascript-logic-to-use-a-functional-approach-fca3ae5e406" class="p-canonical">Canonical link</a></p><p>Exported from <a href="https://medium.com">Medium</a> on October 30, 2025.</p></footer></article></body></html>